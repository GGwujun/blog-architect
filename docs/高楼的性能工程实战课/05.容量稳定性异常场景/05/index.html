<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-architect/umi.3ec1f225.css" />
    <script>
      window.routerBase = "/blog-architect";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>
      27 | 稳定性场景之二：怎样搞定磁盘不足产生的瓶颈问题？ - 大师兄
    </title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/高楼的性能工程实战课/05.容量稳定性异常场景/05" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-architect/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-architect/spark性能调优实战">spark性能调优实战</a></li></ul></span><span>架构师<ul><li><a href="/blog-architect/设计模式之美">设计模式之美</a></li><li><a href="/blog-architect/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-architect/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-architect/说透中台">说透中台</a></li><li><a href="/blog-architect/oauth2.0实战课">oauth2.0实战课</a></li><li><a href="/blog-architect/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-architect/即时消息技术剖析与实战">即时消息技术剖析与实战</a></li><li><a href="/blog-architect/如何设计一个秒杀系统">如何设计一个秒杀系统</a></li><li><a href="/blog-architect/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-architect/性能优化高手课">性能优化高手课</a></li><li><a href="/blog-architect/性能工程高手课">性能工程高手课</a></li><li><a href="/blog-architect/手把手带你搭建秒杀系统">手把手带你搭建秒杀系统</a></li><li><a href="/blog-architect/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-architect/推荐系统三十六式">推荐系统三十六式</a></li><li><a href="/blog-architect/检索技术核心20讲">检索技术核心20讲</a></li><li><a href="/blog-architect/软件设计之美">软件设计之美</a></li><li><a href="/blog-architect/高并发系统设计40问">高并发系统设计40问</a></li><li><a aria-current="page" class="active" href="/blog-architect/高楼的性能工程实战课">高楼的性能工程实战课</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-architect/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-architect/spark性能调优实战">spark性能调优实战</a></li></ul></li><li>架构师<ul><li><a href="/blog-architect/设计模式之美">设计模式之美</a></li><li><a href="/blog-architect/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-architect/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-architect/说透中台">说透中台</a></li><li><a href="/blog-architect/oauth2.0实战课">oauth2.0实战课</a></li><li><a href="/blog-architect/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-architect/即时消息技术剖析与实战">即时消息技术剖析与实战</a></li><li><a href="/blog-architect/如何设计一个秒杀系统">如何设计一个秒杀系统</a></li><li><a href="/blog-architect/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-architect/性能优化高手课">性能优化高手课</a></li><li><a href="/blog-architect/性能工程高手课">性能工程高手课</a></li><li><a href="/blog-architect/手把手带你搭建秒杀系统">手把手带你搭建秒杀系统</a></li><li><a href="/blog-architect/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-architect/推荐系统三十六式">推荐系统三十六式</a></li><li><a href="/blog-architect/检索技术核心20讲">检索技术核心20讲</a></li><li><a href="/blog-architect/软件设计之美">软件设计之美</a></li><li><a href="/blog-architect/高并发系统设计40问">高并发系统设计40问</a></li><li><a aria-current="page" class="active" href="/blog-architect/高楼的性能工程实战课">高楼的性能工程实战课</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-architect/高楼的性能工程实战课">高楼的性能工程实战课</a></li><li><a href="/blog-architect/高楼的性能工程实战课/01.开篇词">01.开篇词</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/01.开篇词/01"><span>开篇词 | 打破四大认知局限，进阶高级性能工程师</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/02.性能工程的核心理念">02.性能工程的核心理念</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/02.性能工程的核心理念/01"><span>01 | 性能工程：为什么很多性能测试人员无法对性能结果负责？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/02.性能工程的核心理念/02"><span>02 | 关键概念：性能指标和场景的确定</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/02.性能工程的核心理念/03"><span>03 | 核心分析逻辑：所有的性能分析，靠这七步都能搞定</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/02.性能工程的核心理念/04"><span>04 | 如何构建性能分析决策树和查找瓶颈证据链？</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/03.性能工程的实践关键点">03.性能工程的实践关键点</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/03.性能工程的实践关键点/01"><span>05 | 性能方案：你的方案是否还停留在形式上？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/03.性能工程的实践关键点/02"><span>06 | 如何抽取出符合真实业务场景的业务模型？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/03.性能工程的实践关键点/03"><span>07 | 性能场景的数据到底应该做成什么样子？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/03.性能工程的实践关键点/04"><span>08 | 并发、在线和TPS到底是什么关系？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/03.性能工程的实践关键点/05"><span>09 | 如何设计全局和定向监控策略？</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景">04.基准场景</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/01"><span>10 | 设计基准场景需要注意哪些关键点？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/02"><span>11 | 打开首页之一：一个案例，带你搞懂基础硬件设施的性能问题</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/03"><span>12 | 打开首页之二：如何平衡利用硬件资源？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/04"><span>13 | 用户登录：怎么判断线程中的Block原因？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/05"><span>14 | 用户信息查询：如何解决网络软中断瓶颈问题？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/06"><span>15 | 查询商品：资源不足有哪些性能表现？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/07"><span>16 | 商品加入购物车：SQL优化和压力工具中的参数分析</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/08"><span>17 | 查询购物车：为什么铺底参数一定要符合真实业务特性？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/09"><span>18 | 购物车信息确定订单：为什么动态参数化逻辑非常重要？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/10"><span>19 | 生成订单信息之一：应用JDBC池优化和内存溢出分析</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/11"><span>20 | 生成订单信息之二：业务逻辑复杂，怎么做性能优化？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/12"><span>21 | 支付前查询订单列表：如何分析优化一个固定的技术组件？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/04.基准场景/13"><span>22 | 支付订单信息：如何高效解决for循环产生的内存溢出？</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景">05.容量稳定性异常场景</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/01"><span>23 | 决定容量场景成败的关键因素有哪些？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/02"><span>24 | 容量场景之一：索引优化和Kubernetes资源分配不均衡怎么办？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/03"><span>25 | 容量场景之二：缓存对性能会有什么样的影响？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/04"><span>26 | 稳定性场景之一：怎样搞定业务积累量产生的瓶颈问题？</span></a></li><li><a aria-current="page" class="active" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05"><span>27 | 稳定性场景之二：怎样搞定磁盘不足产生的瓶颈问题？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/06"><span>28 | 如何确定异常场景的范围和设计逻辑？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/07"><span>29 | 异常场景：如何模拟不同组件层级的异常？</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/06.特别放送">06.特别放送</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/06.特别放送/01"><span>我们这个课程的系统是怎么搭建起来的？</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/07.性能结论">07.性能结论</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/07.性能结论/01"><span>30 | 如何确定生产系统配置？</span></a></li><li><a href="/blog-architect/高楼的性能工程实战课/07.性能结论/02"><span>31 | 怎么写出有价值的性能报告？</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/08.结课测试">08.结课测试</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/08.结课测试/01"><span>一套习题，测出你的掌握程度</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/09.结束语">09.结束语</a><ul><li><a href="/blog-architect/高楼的性能工程实战课/09.结束语/01"><span>结束语 | 做真正的性能项目</span></a></li></ul></li><li><a href="/blog-architect/高楼的性能工程实战课/summary">高楼的性能工程实战课</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="定向监控分析" data-depth="2"><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#定向监控分析"><span>定向监控分析</span></a></li><li title="定向分析第二阶段" data-depth="3"><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#定向分析第二阶段"><span>定向分析第二阶段</span></a></li><li title="定向分析第三阶段" data-depth="3"><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#定向分析第三阶段"><span>定向分析第三阶段</span></a></li><li title="总结" data-depth="2"><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#总结"><span>总结</span></a></li><li title="课后作业" data-depth="2"><a href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#课后作业"><span>课后作业</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="27--稳定性场景之二怎样搞定磁盘不足产生的瓶颈问题"><a aria-hidden="true" tabindex="-1" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#27--稳定性场景之二怎样搞定磁盘不足产生的瓶颈问题"><span class="icon icon-link"></span></a>27 | 稳定性场景之二：怎样搞定磁盘不足产生的瓶颈问题？</h1><p>你好，我是高楼。</p><p>上节课，我们讲解了稳定性场景的两个要点：运行时长和压力量级，并通过课程的示例系统，带你具体操作了稳定性场景。</p><p>在定向分析的第一个阶段中，我们分析了虚拟机内存超分导致的操作系统OOM的问题，发现是配置的超分过大导致的。在我们降低了虚拟机的内存之后，稳定性场景的运行时间超过了12个小时，累积业务量达到7200多万，这样的结果已经达到了我们的目标。</p><p>可是，由于贪心，我并没有停止场景，就在它继续运行的时候，又出现了新问题……因此，我们今天就进入到定向分析的第二阶段，看看还有什么问题在等着我们。</p><h2 id="定向监控分析"><a aria-hidden="true" tabindex="-1" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#定向监控分析"><span class="icon icon-link"></span></a>定向监控分析</h2><h3 id="定向分析第二阶段"><a aria-hidden="true" tabindex="-1" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#定向分析第二阶段"><span class="icon icon-link"></span></a>定向分析第二阶段</h3><p>当场景继续运行的时候，我看到了这样的数据：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimageeb8feb84fbb4e1105ce58dd9e45f849b768f.6c3819ef.png" alt=""/></p><p>从图中我们可以很明显地看到，在场景持续运行的过程中，TPS掉下来了，响应时间则是蹭蹭往上涨。</p><p>我们看一下这时候的总业务累积量：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimagec992c9855e4f7cdb3b0d18d222f44bf50692.7a35a0c7.png" alt=""/></p><p>也就是说，多了20多万的业务累积量。</p><p>见到问题，不分析总是觉得不那么舒服，那我们就来分析一下。</p><p>还是按照性能分析决策树，我们把计数器一个一个查过去。在我查看MySQL的Pod日志时，发现它一直在被删掉重建：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage754375aa8e663d3a3a8959d4443de60ba043.c5532a07.png" alt=""/></p><p>请注意，我们这是一个示例系统，为了方便重建，我把MySQL放到Pod中了。如果是在真实的环境中，我建议你最好根据生产的实际配置来做数据库的配置。</p><p>讲到这里，我稍微回应一下行业里的一种声音：数据库不应该放到Kubernetes的Pod中去。我不清楚持这样观点的人，只是在感觉上认为不安全，还是真正遇到了问题。在我的经验中，很多系统对数据库的性能要求其实并不高，业务量也不大。而用容器来管理便于迁移和重建，并且性能上也完全跟得上。所以，在这种场景下用Pod也没有关系。</p><p>当然，也有一些系统用数据库比较狠，为了保障更高的性能，会在物理机上直接部署。如果你面对的系统，确实需要用到物理机来创建数据库，那就选择物理机。如果Pod可以满足需求，我觉得不用纠结，直接用Pod就可以了。</p><p>因为MySQL的Pod被删掉重建，而MySQL又位于worker-1中，那我们就来看一下worker-1的操作系统日志：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">Feb 22 00:43:16 k8s-worker-1 kubelet: I0222 00:43:16.085214    1082 image_gc_manager.go:304] [imageGCManager]: Disk usage on image filesystem is at 95% which is over the high threshold (85%). Trying to free 7213867827 bytes down to the low threshold (80%).</span></div></pre></div><p>原来是分配给worker-1的磁盘被用光了，难怪MySQL的Pod一直在被删掉重建。</p><p>我们检查一下磁盘的配额：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">[root@k8s-worker-1 ~]# df -h</span></div><div class="token-line"><span class="token plain">    文件系统                 容量  已用  可用 已用% 挂载点</span></div><div class="token-line"><span class="token plain">    devtmpfs                 6.3G     0  6.3G    0% /dev</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   24M  6.3G    1% /dev/shm</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   67M  6.3G    2% /run</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G     0  6.3G    0% /sys/fs/cgroup</span></div><div class="token-line"><span class="token plain">    /dev/mapper/centos-root   47G   45G  2.7G   95% /</span></div><div class="token-line"><span class="token plain">    /dev/vda1               1014M  304M  711M   30% /boot</span></div><div class="token-line"><span class="token plain">    tmpfs                    1.3G  4.0K  1.3G    1% /run/user/42</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/9962f8d2-f6bb-4981-a073-dd16bfa9a171/volumes/kubernetes.io~secret/kube-proxy-token-vnxh9</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/f5872331-14b1-402b-99e0-063834d834fa/volumes/kubernetes.io~secret/calico-node-token-hvs7q</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/e61e5b2232592ef9883861d8536f37153617d46735026b49b285c016a47179cf/merged</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/4c057d86c1eabb84eddda86f991ca3852042da0647fd5b8c349568e2a0565591/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/f1e8c983be46895acc576c1d51b631bd2767aabe908035cff229af0cd6c47ffb/mounts/shm</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/c7e44cdfc5faa7f8ad9a08f8b8ce44928a5116ccf912fbc2d8d8871ab00648a5/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/a685a1652586aca165f7f159347bf466dd63f497766762d8738b511c7eca1df3/merged</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/b7da3fde04f716a7385c47fe558416b35e471797a97b28dddd79f500c62542f2/merged</span></div><div class="token-line"><span class="token plain">    tmpfs                    1.3G   36K  1.3G    1% /run/user/0</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/d01f8686-e066-4ebf-951e-e5fe9d39067d/volumes/kubernetes.io~secret/node-exporter-token-wnzc6</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/5215bd987a62316b3ebb7d6b103e991f26fffea4fe3c05aac51feeb44ab099ab/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/d0cf9df15ac269475bb9f2aec20c048c8a61b98a993c16f5d6ef4aba2027326a/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/aa5125b01d60b19c75f3f5d018f7bb51e902264580a7f4033e5d2abaaf7cc3f6/merged</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/3a7d3d4cddc51410103731e7e8f3fbcddae4d74a116c88582557a79252124c5d/merged</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/34f60184-07e5-40da-b2cb-c0295d560d54/volumes/kubernetes.io~secret/default-token-7s6hb</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/940009fca9f57e4b6f6d38bab584d69a2f3ff84153e3f0dfd3c9b9db91fa2b30/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/12c6a27bb53a4b0de5556a960d7c394272d11ceb46ac8172bd91f58f762cde14/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/366007a9f82dfb9bd5de4e4cadf184cba122ef2070c096f393b7b9e24ae06a98/merged</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/251e9c86-4f25-42bd-82a0-282d057fe238/volumes/kubernetes.io~secret/nginx-ingress-token-cbpz9</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/1defd5a0004201a0f116f48dd2a21cba16647a3c8fdfde802fb5ea1d3e5591ff/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/459bf58b1cafcc9ab673d30b92ae815a093e85593ab01921b9ba6e677e36fe45/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                   47G   45G  2.7G   95% /var/lib/docker/overlay2/49197bcd5b63e30abc94315b0083761a4fd25ebf4341d2574697b84e49350d53/merged</span></div><div class="token-line"><span class="token plain">    [root@k8s-worker-1 ~]#</span></div></pre></div><p>可以看到，磁盘的配置是使用到95%就会驱逐Pod，而现在的磁盘使用量已经到了配置的限额。</p><p>既然如此，那我们的解决方案也就非常明确了，就是把磁盘再加大一些，我们再扩大100G：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">[root@k8s-worker-1 ~]# df -h</span></div><div class="token-line"><span class="token plain">    文件系统                 容量  已用  可用 已用% 挂载点</span></div><div class="token-line"><span class="token plain">    devtmpfs                 6.3G     0  6.3G    0% /dev</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G     0  6.3G    0% /dev/shm</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   19M  6.3G    1% /run</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G     0  6.3G    0% /sys/fs/cgroup</span></div><div class="token-line"><span class="token plain">    /dev/mapper/centos-root  147G   43G  105G   30% /</span></div><div class="token-line"><span class="token plain">    /dev/vda1               1014M  304M  711M   30% /boot</span></div><div class="token-line"><span class="token plain">    tmpfs                    1.3G  4.0K  1.3G    1% /run/user/42</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/d01f8686-e066-4ebf-951e-e5fe9d39067d/volumes/kubernetes.io~secret/node-exporter-token-wnzc6</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/9962f8d2-f6bb-4981-a073-dd16bfa9a171/volumes/kubernetes.io~secret/kube-proxy-token-vnxh9</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/251e9c86-4f25-42bd-82a0-282d057fe238/volumes/kubernetes.io~secret/nginx-ingress-token-cbpz9</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/f5872331-14b1-402b-99e0-063834d834fa/volumes/kubernetes.io~secret/calico-node-token-hvs7q</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/7380ac7d8f83ba37ddae785e5b4cd65ef7f9aa138bfb04f86e3c7f186f54211a/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/3c90444a51820f83954c4f32a5bc2d1630762cdf6d3be2c2f897a3f26ee54760/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/c841e85e88fdcfe9852dcde33849b3e9c5a229e63ee5daea374ddbc572432235/merged</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/147a81e8a50401ec90d55d3d4df3607eb5409ffe10e2c4c876c826aa5d47caf0/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/9e2c04b858025523e7b586fe679a429ac49df3711881261cda40b158ad05aebf/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/83e01c8cda50233088dc70395a14c861ac09ce5e36621f1d8fdd8d3d3e0a7271/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/f23362117532f08ff89f937369c3e4d2039d55a9ba51f61e41e62d725b24e3a1/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/0cfe0dbd0c633e13a42bd3d69bd09ea51ab4354d77a0e6dcf93cabf4c76c3942/merged</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/7b83010457d86cecf3c80ebc34d9db5d26400c624cba33a23f0e9983f7791aef/merged</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/0f31c96b1961d5df194a3710fdc896063a864f4282d7a287b41da27e4d58a456/merged</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/f67a6de6a1b18d4748581230ed7c34c8f16d8f0dd877a168eb12eacf6bf42f05/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/e3eb1ea1785e35045213518dd6814edcd361b501748b8e6bdede20c8961062d2/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/5cec0d1a7723dfcb0e5eaf139f4965a220575557795ad2959ce100aa888dc12b/merged</span></div><div class="token-line"><span class="token plain">    tmpfs                    1.3G   32K  1.3G    1% /run/user/0</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/704657eb-ea28-4fb0-8aee-c49870e692d3/volumes/kubernetes.io~secret/default-token-7s6hb</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/da4073b560a2ce031fa234624c09757b65eb7b6cfc895186dbf8731e2d279fee/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/76a6814a838778049495e9f8b2b93e131d041c8f90e8dea867d3c99fa6ca918b/mounts/shm</span></div><div class="token-line"><span class="token plain">    tmpfs                    6.3G   12K  6.3G    1% /var/lib/kubelet/pods/a73b0bc6-76fc-4e2a-9202-380397399b76/volumes/kubernetes.io~secret/default-token-7s6hb</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/cea9c51e718964cc46824ba51ff631a898402318c19e9603c6d364ac3bed8a27/merged</span></div><div class="token-line"><span class="token plain">    shm                       64M     0   64M    0% /var/lib/docker/containers/d936e646d12f7b8381a36e8a11094d76a0a72d95f84edf3f30c7e8b3981264e0/mounts/shm</span></div><div class="token-line"><span class="token plain">    overlay                  147G   43G  105G   30% /var/lib/docker/overlay2/4c210c659428999d000676fde7f1c952f1f43d68b63b308fa766b0ce41568f06/merged</span></div><div class="token-line"><span class="token plain">    [root@k8s-worker-1 ~]#</span></div></pre></div><p>这样就完美地解决了MySQL中的Pod一直在被删掉重建的问题，对吧！</p><p>不过，我们高兴得有些早了，正当我把这次的稳定性场景接着跑起来的时候，结果还没出来，又出现了新问题！于是，我们只得来到定向分析的第三阶段。</p><h3 id="定向分析第三阶段"><a aria-hidden="true" tabindex="-1" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#定向分析第三阶段"><span class="icon icon-link"></span></a>定向分析第三阶段</h3><p>在上一阶段中，我们发现了MySQL的Pod被删掉重建。于是，当场景再次运行起来时，我就直接查看了所有namespace中的Pod状态，结果看到了下面的信息：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage90679056513807ceb171d0d4691cb817ca67.e2836a60.png" alt=""/></p><p>不知道什么原因，Order容器一直在被驱逐。</p><p>通过查看日志，我发现了这样的信息：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage54bb544055c6ef899aa5d76123382a7e87bb.5640cc90.png" alt=""/></p><p>DiskPressure！这就是说Order服务所在的worker上的存储被用完了呗。在Order应用的虚拟机中，我通过查看Kubernetes日志，发现了这样的错误信息：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">kubelet: W0222 14:31:35.507991    1084 eviction_manager.go:344] eviction manager: attempting to reclaim ephemeral-storage</span></div></pre></div><p>这是Order应用的存储已经用完了，并且尝试扩展存储。我们接着查Kubernetes日志，看到了“The node was low on resource: ephemeral-storage”的提示。</p><p>对Order服务来说，不就是写个日志吗？其他的应用方法都是在用CPU，到底什么Order服务会用这么多的磁盘呢？我们查一下日志，结果看到了这样的错误信息：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">[2021-02-25 20:48:22.022] [org.apache.juli.logging.DirectJDKLog] [http-nio-8086-exec-349] [175] [ERROR] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.UncategorizedSQLException: </span></div><div class="token-line"><span class="token plain">    ### Error querying database.  Cause: java.sql.SQLException: Index oms_order is corrupted</span></div><div class="token-line"><span class="token plain">    ### The error may exist in URL [jar:file:/app.jar!/BOOT-INF/lib/mall-mbg-1.0-SNAPSHOT.jar!/com/dunshan/mall/mapper/OmsOrderMapper.xml]</span></div><div class="token-line"><span class="token plain">    ### The error may involve com.dunshan.mall.mapper.OmsOrderMapper.selectByExample-Inline</span></div><div class="token-line"><span class="token plain">    ### The error occurred while setting parameters</span></div><div class="token-line"><span class="token plain">    ### SQL: SELECT count(0) FROM oms_order WHERE (delete_status = ? AND member_id = ?)</span></div><div class="token-line"><span class="token plain">    ### Cause: java.sql.SQLException: Index oms_order is corrupted</span></div><div class="token-line"><span class="token plain">    ; uncategorized SQLException; SQL state [HY000]; error code [1712]; Index oms_order is corrupted; nested exception is java.sql.SQLException: Index oms_order is corrupted] with root cause</span></div><div class="token-line"><span class="token plain">    java.sql.SQLException: Index oms_order is corrupted</span></div></pre></div><p>这样的错误有很多，并且还增加得非常快。难道是Order表坏了？</p><p>在Order服务的日志中，我们可以看到明显是SQL执行报错了，但是我们在上面已经增加了MySQL机器的硬盘，按理说不应该是MySQL的磁盘不够导致的这类报错。所以，我们再来看看MySQL错误日志：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">156 2021-02-25T11:26:35.520327Z 0 [Note] InnoDB: Uncompressed page, stored checksum in field1 2147483648, calculated checksums for field1: crc32 1193184986/3495072576, innodb 846701958,         none 3735928559, stored checksum in field2 2147483659, calculated checksums for field2: crc32 1193184986/3495072576, innodb 810726412, none 3735928559,  page LSN 0 0, low 4 bytes of         LSN at page end 3836608512, page number (if stored to page already) 327680, space id (if created with &gt;= MySQL-4.1.1 and stored already) 0</span></div><div class="token-line"><span class="token plain">    157 InnoDB: Page may be a freshly allocated page</span></div><div class="token-line"><span class="token plain">    158 2021-02-25T11:26:35.520373Z 0 [Note] InnoDB: It is also possible that your operating system has corrupted its own file cache and rebooting your computer removes the error. If the cor        rupt page is an index page. You can also try to fix the corruption by dumping, dropping, and reimporting the corrupt table. You can use CHECK TABLE to scan your table for corruption.         Please refer to http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html for information about forcing recovery.</span></div><div class="token-line"><span class="token plain">    159 2021-02-25T11:26:35.520408Z 0 [ERROR] InnoDB: Space id and page no stored in the page, read in are [page id: space=779484, page number=3836674048], should be [page id: space=111, pag        e number=150922]</span></div><div class="token-line"><span class="token plain">    160 2021-02-25T11:26:35.520415Z 0 [ERROR] InnoDB: Database page corruption on disk or a failed file read of page [page id: space=111, page number=150922]. You may have to recover from a         backup.</span></div><div class="token-line"><span class="token plain">    161 2021-02-25T11:26:35.520420Z 0 [Note] InnoDB: Page dump in ascii and hex (16384 bytes):</span></div><div class="token-line"><span class="token plain">    .............</span></div></pre></div><p>从上面的信息来看，应该是数据库的文件损坏了，从而导致了报错。</p><p>那我们就尝试一下直接在MySQL中对这个表进行操作，会不会报错。结果得到如下信息：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">[Err] 1877 - Operation cannot be performed. The table &#x27;mall.oms_order&#x27; is missing, corrupt or contains bad data.</span></div></pre></div><p>这个错误日志提示说，操作系统的文件有可能出现了问题，建议重启操作系统。既然系统有建议，那咱就重启一下吧。</p><p>然而，世事无常，处处是坑，我们在重启操作系统时看到了这个界面：</p><p><img src="data:image/png;base64,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" alt=""/></p><p>想哭对吧？现在居然连磁盘都找不着了……</p><p>回想刚才对磁盘的操作，我们在增加磁盘空间时，直接用的是这个命令：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">qumu-img resize imagename +100G</span></div></pre></div><p>我在查看了官方资料之后发现，这个命令虽然能扩容，但是要先关闭虚拟机，不然磁盘会出问题。而我们当时并没有关虚拟机。没办法，我们只有把虚拟机重建一下了。</p><p>经过一翻折腾，我们再次把数据库启动，等应用都正常连上之后，再次把稳定性场景运行起来，看到了这样的结果：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimageb2ffb28a7b6c3e9948eaf03aefcdd2e4a7ff.07bdd1d2.png" alt=""/></p><p>此时的业务累积量为：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage25662580844435055e892f4c6e5db3ae4866.6bfa657c.png" alt=""/></p><p>从场景数据来看，TPS有所下降，这是因为我们在压力过程中，所有的数据一直都是累加的。累加得越多，数据库中的操作就会越慢，我们看一下worker-1中，数据库的资源使用量就可以知道：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimageb8f7b8b5d3331422990a63811c8b006204f7.f7bc4f38.png" alt=""/></p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage2597255a568b72bb370fd48f2398b6ed2697.2e565383.png" alt=""/></p><p>你看，这里面的系统负载和IO吞吐，都因稳定性运行时间越来越长、数据量越来越多受到了影响。我们后续的优化思路也就非常明确了，那就是保证当前表的数据量级，像分库分表、定期归档这样的手段就可以上了，这些操作都是常规操作。</p><p>在我们当前这个场景中，由于稳定性目标已经达到，就不再接着往下整了。毕竟，性能优化是没有止境的。</p><h2 id="总结"><a aria-hidden="true" tabindex="-1" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#总结"><span class="icon icon-link"></span></a>总结</h2><p>正如我们前面所说，在稳定性场景中，我们要关注的就是“运行时长”和“业务累积量”这两个指标。只要达到了这两个指标，稳定性场景即可结束。</p><p>在这节课中，我们分析了长时间运行导致的两个问题：</p><ul><li><strong>磁盘不足的问题</strong></li></ul><p>这样的问题在稳定性中也是经常出现的。因此，我们在稳定性场景运行之前，最好预估一下会用到多少磁盘。像日志之类的增长速度，一定要做好循环日志，不要保留太长时间。如果你想保留，那就移到其他地方去。</p><ul><li><strong>数据库文件损坏的问题</strong></li></ul><p>这是扩展磁盘空间导致的问题。虽然在操作的过程中，磁盘看似成功扩展了，但由于操作的不当导致了数据库文件损坏。这类问题虽然是操作上的问题，但在操作的过程中我们却没有看到任何的错误信息和提醒。</p><p>另外，我们还需要充分考虑数据库的累积量。我建议你先通过计算来判断，当数据库的数据量增加后，会对应用产生什么样的影响。磁盘要能保证数据库当前表的数据量，以及数据增长过程中的查询性能。</p><p>在这里，我无法穷举出稳定性中的所有问题，只有通过实际案例给你一个分析的思路，供你借鉴。在你的应用场景中，你可以根据RESAR性能工程理论分析具体的问题。</p><p>总之，在性能工程中，稳定性场景对系统来说是一个严峻的考验。“合情合理地设计稳定性场景，并且做到符合生产业务场景”是我们必须要达到的目标。</p><h2 id="课后作业"><a aria-hidden="true" tabindex="-1" href="/blog-architect/高楼的性能工程实战课/05.容量稳定性异常场景/05#课后作业"><span class="icon icon-link"></span></a>课后作业</h2><p>这就是今天的全部内容，最后给你留两个思考题吧：</p><ol><li>你在稳定性场景中遇到过什么由于业务不断累积导致的问题？</li><li>在稳定性场景中，如何保证磁盘使用量不会随场景持续增加，而是保持在一个使用量级？</li></ol><p>记得在留言区和我讨论、交流你的想法，每一次思考都会让你更进一步。</p><p>如果这节课让你有所收获，也欢迎你分享给你的朋友，共同学习进步。我们下一讲再见！</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/高楼的性能工程实战课/05.容量稳定性异常场景/05.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/29 14:47:35</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-architect/umi.ded6fefd.js"></script>
  </body>
</html>
