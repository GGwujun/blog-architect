<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-architect/umi.3ec1f225.css" />
    <script>
      window.routerBase = "/blog-architect";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>01 | 程序员为什么要关心代码性能？ - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/性能工程高手课/02.开篇认识代码性能和系统容量效率/01" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-architect/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-architect/spark性能调优实战">spark性能调优实战</a></li></ul></span><span>架构师<ul><li><a href="/blog-architect/设计模式之美">设计模式之美</a></li><li><a href="/blog-architect/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-architect/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-architect/说透中台">说透中台</a></li><li><a href="/blog-architect/oauth2.0实战课">oauth2.0实战课</a></li><li><a href="/blog-architect/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-architect/即时消息技术剖析与实战">即时消息技术剖析与实战</a></li><li><a href="/blog-architect/如何设计一个秒杀系统">如何设计一个秒杀系统</a></li><li><a href="/blog-architect/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-architect/性能优化高手课">性能优化高手课</a></li><li><a aria-current="page" class="active" href="/blog-architect/性能工程高手课">性能工程高手课</a></li><li><a href="/blog-architect/手把手带你搭建秒杀系统">手把手带你搭建秒杀系统</a></li><li><a href="/blog-architect/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-architect/推荐系统三十六式">推荐系统三十六式</a></li><li><a href="/blog-architect/检索技术核心20讲">检索技术核心20讲</a></li><li><a href="/blog-architect/软件设计之美">软件设计之美</a></li><li><a href="/blog-architect/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-architect/高楼的性能工程实战课">高楼的性能工程实战课</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-architect/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-architect/spark性能调优实战">spark性能调优实战</a></li></ul></li><li>架构师<ul><li><a href="/blog-architect/设计模式之美">设计模式之美</a></li><li><a href="/blog-architect/架构实战案例解析">架构实战案例解析</a></li><li><a href="/blog-architect/许式伟的架构课">许式伟的架构课</a></li><li><a href="/blog-architect/说透中台">说透中台</a></li><li><a href="/blog-architect/oauth2.0实战课">oauth2.0实战课</a></li><li><a href="/blog-architect/从0开始学架构">从0开始学架构</a></li><li><a href="/blog-architect/即时消息技术剖析与实战">即时消息技术剖析与实战</a></li><li><a href="/blog-architect/如何设计一个秒杀系统">如何设计一个秒杀系统</a></li><li><a href="/blog-architect/如何落地业务建模">如何落地业务建模</a></li><li><a href="/blog-architect/性能优化高手课">性能优化高手课</a></li><li><a aria-current="page" class="active" href="/blog-architect/性能工程高手课">性能工程高手课</a></li><li><a href="/blog-architect/手把手带你搭建秒杀系统">手把手带你搭建秒杀系统</a></li><li><a href="/blog-architect/技术与商业案例解读">技术与商业案例解读</a></li><li><a href="/blog-architect/推荐系统三十六式">推荐系统三十六式</a></li><li><a href="/blog-architect/检索技术核心20讲">检索技术核心20讲</a></li><li><a href="/blog-architect/软件设计之美">软件设计之美</a></li><li><a href="/blog-architect/高并发系统设计40问">高并发系统设计40问</a></li><li><a href="/blog-architect/高楼的性能工程实战课">高楼的性能工程实战课</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-architect/性能工程高手课">性能工程高手课</a></li><li><a href="/blog-architect/性能工程高手课/01.开篇词">01.开篇词</a><ul><li><a href="/blog-architect/性能工程高手课/01.开篇词/01"><span>开篇词 | 代码不要眼前的苟且，而要效率的提升和性能的优化</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率">02.开篇认识代码性能和系统容量效率</a><ul><li><a aria-current="page" class="active" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01"><span>01 | 程序员为什么要关心代码性能？</span></a></li><li><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/02"><span>02 | 程序员也要关心整个系统和公司成本吗？</span></a></li><li><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/03"><span>03 |  导读：专栏是怎么设计的？需要哪些知识？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/03.性能定律和数理基础">03.性能定律和数理基础</a><ul><li><a href="/blog-architect/性能工程高手课/03.性能定律和数理基础/01"><span>04 | 性能工程三定律：IT业和性能优化工作的“法律法规”</span></a></li><li><a href="/blog-architect/性能工程高手课/03.性能定律和数理基础/02"><span>05 | 概率统计和排队论：做性能工作必须懂的数理基础</span></a></li><li><a href="/blog-architect/性能工程高手课/03.性能定律和数理基础/03"><span>06 | 性能数据的分析：如何从大量数据中看出想要的信号？</span></a></li><li><a href="/blog-architect/性能工程高手课/03.性能定律和数理基础/04"><span>07 | 性能数据的展示：一图胜千言，说出你的数据故事</span></a></li><li><a href="/blog-architect/性能工程高手课/03.性能定律和数理基础/05"><span>08 | 经验总结：必须熟记的一组常用性能数字</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/04.性能测试">04.性能测试</a><ul><li><a href="/blog-architect/性能工程高手课/04.性能测试/01"><span>09 | 性能测试的种类：如何快准狠地抓住一个测试的本质？</span></a></li><li><a href="/blog-architect/性能工程高手课/04.性能测试/02"><span>10 | 性能测试的规划和步骤：为什么性能测试不容易一蹴而就呢？</span></a></li><li><a href="/blog-architect/性能工程高手课/04.性能测试/03"><span>11 | 性能测试的工具：七大测试场景如何选择高质量的测试工具？</span></a></li><li><a href="/blog-architect/性能工程高手课/04.性能测试/04"><span>12 | 九条性能测试的经验和教训：如何保证测试结果可靠且可重复？</span></a></li><li><a href="/blog-architect/性能工程高手课/04.性能测试/05"><span>13 | 性能测试的工程集成：如何与产品开发和运维业务有机集成？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/05.性能分析">05.性能分析</a><ul><li><a href="/blog-architect/性能工程高手课/05.性能分析/01"><span>14 | 性能分析概述：性能问题归根结底是什么原因？</span></a></li><li><a href="/blog-architect/性能工程高手课/05.性能分析/02"><span>15 | CPU篇：如何让CPU的运行不受阻碍？</span></a></li><li><a href="/blog-architect/性能工程高手课/05.性能分析/03"><span>16 | 内存篇：如何减少延迟提升内存分配效率？</span></a></li><li><a href="/blog-architect/性能工程高手课/05.性能分析/04"><span>17 | 存储篇：如何根据性能优缺点选择最合适的存储系统？</span></a></li><li><a href="/blog-architect/性能工程高手课/05.性能分析/05"><span>18 | 网络篇：如何步步拆解处理复杂的网络性能问题？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/06.性能优化">06.性能优化</a><ul><li><a href="/blog-architect/性能工程高手课/06.性能优化/01"><span>19 | 性能优化六大原则：三要三不要，快速有效地进行优化</span></a></li><li><a href="/blog-architect/性能工程高手课/06.性能优化/02"><span>20 | 性能优化十大策略：如何系统地有层次地优化性能问题？</span></a></li><li><a href="/blog-architect/性能工程高手课/06.性能优化/03"><span>21 | CPU案例：如何提高LLC（最后一级缓存）的命中率？</span></a></li><li><a href="/blog-architect/性能工程高手课/06.性能优化/04"><span>22 | 系统案例：如何提高iTLB（指令地址映射）的命中率？</span></a></li><li><a href="/blog-architect/性能工程高手课/06.性能优化/05"><span>23 | 存储案例：如何降低SSD峰值延迟？</span></a></li><li><a href="/blog-architect/性能工程高手课/06.性能优化/06"><span>24 | 跨层案例：如何优化程序、OS和存储系统的交互？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/07.性能工程实践">07.性能工程实践</a><ul><li><a href="/blog-architect/性能工程高手课/07.性能工程实践/01"><span>25 | 如何在生产环境中进行真实的容量测试？</span></a></li><li><a href="/blog-architect/性能工程高手课/07.性能工程实践/02"><span>26 | 怎么规划和控制数据库的复制延迟大小？</span></a></li><li><a href="/blog-architect/性能工程高手课/07.性能工程实践/03"><span>27 | 多任务环境中的Java性能问题，怎样才能不让程序互相干扰？</span></a></li><li><a href="/blog-architect/性能工程高手课/07.性能工程实践/04"><span>28 | 网络数据传输慢，问题到底出在哪了？</span></a></li><li><a href="/blog-architect/性能工程高手课/07.性能工程实践/05"><span>29 | 如何彻底发挥SSD的潜力？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/08.容量规划与服务效率">08.容量规划与服务效率</a><ul><li><a href="/blog-architect/性能工程高手课/08.容量规划与服务效率/01"><span>30 | 服务器的管理和部署：工业界近几年有哪些发展趋势？</span></a></li><li><a href="/blog-architect/性能工程高手课/08.容量规划与服务效率/02"><span>31 | 规划部署数据中心要考虑哪些重要因素？</span></a></li><li><a href="/blog-architect/性能工程高手课/08.容量规划与服务效率/03"><span>32 | 服务的容量规划：怎样才能做到有备无患？</span></a></li><li><a href="/blog-architect/性能工程高手课/08.容量规划与服务效率/04"><span>33 | 服务效率提升：如何降低公司运营成本？</span></a></li><li><a href="/blog-architect/性能工程高手课/08.容量规划与服务效率/05"><span>34 | 服务需求控制管理：每种需求都是必需的吗？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/09.总结篇">09.总结篇</a><ul><li><a href="/blog-architect/性能工程高手课/09.总结篇/01"><span>35 | 职业发展：从“锦上添花”到“不可或缺”</span></a></li><li><a href="/blog-architect/性能工程高手课/09.总结篇/02"><span>36 | 如何成为优秀的性能和容量工程师？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/10.结束语">10.结束语</a><ul><li><a href="/blog-architect/性能工程高手课/10.结束语/01"><span>结束语 |  不愁明月尽，自有夜珠来</span></a></li><li><a href="/blog-architect/性能工程高手课/10.结束语/02"><span>结课问卷获奖用户名单</span></a></li><li><a href="/blog-architect/性能工程高手课/10.结束语/03"><span>结课测试 | 这些性能工程知识，你真的掌握了吗？</span></a></li></ul></li><li><a href="/blog-architect/性能工程高手课/summary">性能工程高手课</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="怎么定义“性能”和 “性能好”？" data-depth="2"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#怎么定义性能和-性能好"><span>怎么定义“性能”和 “性能好”？</span></a></li><li title="程序员为什么要关心代码性能？" data-depth="2"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#程序员为什么要关心代码性能"><span>程序员为什么要关心代码性能？</span></a></li><li title="不同级别的程序员都需要关心性能" data-depth="2"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#不同级别的程序员都需要关心性能"><span>不同级别的程序员都需要关心性能</span></a></li><li title="举例1：刚入门的程序员" data-depth="3"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例1刚入门的程序员"><span>举例1：刚入门的程序员</span></a></li><li title="举例2：普通的程序员" data-depth="3"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例2普通的程序员"><span>举例2：普通的程序员</span></a></li><li title="举例3：资深的程序员" data-depth="3"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例3资深的程序员"><span>举例3：资深的程序员</span></a></li><li title="举例4：技术专家" data-depth="3"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例4技术专家"><span>举例4：技术专家</span></a></li><li title="举例５：高级专家（架构师）" data-depth="3"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例５高级专家架构师"><span>举例５：高级专家（架构师）</span></a></li><li title="总结" data-depth="2"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#总结"><span>总结</span></a></li><li title="思考题" data-depth="2"><a href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="01--程序员为什么要关心代码性能"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#01--程序员为什么要关心代码性能"><span class="icon icon-link"></span></a>01 | 程序员为什么要关心代码性能？</h1><p>你好，我是庄振运。</p><p>感谢你加入这个专栏的学习，我也非常高兴能有机会和你一起探索这个领域。</p><p>我在计算机和互联网行业已经研究和工作近 20 年了，一直从事性能优化和容量管理相关的工作。从今天起，我就和你分享我这些年的经验和感悟。</p><p>提起计算机和互联网，多数人首先想到的职业是程序员。中国有多少程序员呢？很多人估计有600万左右。全球的人数就更多了，肯定超过2000万。</p><p>我虽然也在互联网领域，也做过几年写程序的工作，但是现在的工作，严格意义上不算程序员，而是性能工程师。不过我和很多程序员朋友一起工作过，也讨论过。谈到性能优化和系统容量管理的时候，一开始他们经常会问我一个问题，就是程序员为什么需要了解性能和容量这些东西？通俗点说，这个问题就是：我就是一介程序员，性能和系统容量听起来很重要，但与我何干？</p><p>这个问题问得很好。我可以和你肯定地说，程序员应该关心，也必须关心代码性能和系统容量。今天这一讲，我们先说说程序员为什么需要关心性能。</p><h2 id="怎么定义性能和-性能好"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#怎么定义性能和-性能好"><span class="icon icon-link"></span></a>怎么定义“性能”和 “性能好”？</h2><p>说起代码性能，首先我们需要弄清楚什么样的代码算是性能好？怎么样算是性能不好？</p><p>代码性能表现在很多方面和指标，比较常见的几个指标有吞吐量（Throughput）、服务延迟（Service latency）、扩展性（Scalability）和资源使用效率（Resource Utilization）。</p><ul><li>吞吐量：单位时间处理请求的数量。</li><li>服务延迟：客户请求的处理时间。</li><li>扩展性：系统在高压的情况下能不能正常处理请求。</li><li>资源使用效率：单位请求处理所需要的资源量（比如CPU，内存等）。</li></ul><p>必须说明的是，这几个指标之外，根据场景，还可以有其他性能指标，比如可靠性（Reliability）。可靠性注重的是在极端情况下能不能持续处理正常的服务请求。不过，我们这个专栏的讨论，主要围绕前四个更常见的目标。</p><p>性能好的代码，可以用四个字来概括：“多快好省”。</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage95e695a0a14caf49b53ee4859fe892596fe6.89050329.jpg" alt=""/></p><p>看到这四个字，你可能想起了咱们国家当年制定的大跃进总路线，那就是：“鼓足干劲、力争上游、多快好省地建设社会主义”。没错，高性能代码的要求和这个“社会主义建设总路线”相当一致。这里的“多”，就是吞吐量大；“快”，就是服务延迟低；“好”，就是扩展性好；“省”，就是资源使用量低（也即是资源使用效率高）。</p><p>用这样的四个指标来衡量，那么性能不好的代码的表现就是：吞吐量小、延迟大、扩展性差、资源使用高（资源使用效率低）。</p><h2 id="程序员为什么要关心代码性能"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#程序员为什么要关心代码性能"><span class="icon icon-link"></span></a>程序员为什么要关心代码性能？</h2><p>对程序员来讲，写出的代码就是他的产品、他的生命线、他的形象和价值。代码性能不好，就是质量差，不靠谱。轻者影响程序员的声誉，重者影响他的工作。</p><p>对一个公司来讲，产品质量差，公司或许会倒闭。对程序员所在的互联网公司而言，如果公司的业务依赖于程序员写的代码，那么代码性能差，关键时刻掉链子，比如双十一促销的时候，公司的业务性能就会经常出问题，进而会影响公司的运营和营收，这可是天大的事情。</p><p>因此，如果一个程序员写出性能很差的代码，无异于耍流氓，并且相关程序员的工作也很难保住。</p><p>反过来讲，如果写出的代码性能很高，那代码的作者必定是我们大家认可的“靠谱”程序员，少不了“人见人爱”——客户喜欢，同事喜欢，领导也喜欢。</p><h2 id="不同级别的程序员都需要关心性能"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#不同级别的程序员都需要关心性能"><span class="icon icon-link"></span></a>不同级别的程序员都需要关心性能</h2><p>还有些朋友或许认为：代码性能是<strong>某些人或者其他人</strong>应该负责的；我就负责把代码写出来，优化的事，他们负责。这里的“某些人和其他人”可以是指软件测试人员、运维人员、技术专家，或者是性能工程师。</p><p>这种想法也是不对的。我下面就用几个案例来举例说明，代码性能是各个级别的程序员都应该关心和负责的。事实上，程序员从学校出来开始，一步步地在职业上攀升，每一步都应该和性能结伴而行。</p><p>我用一张图来表示一个成功程序员的技术职业轨迹（注意里面的职位和年限仅供参考）。</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage0bde0b74f5861099d26e00ec76007913b6de.fc951713.jpg" alt=""/></p><p>学生刚刚从学校毕业，加入互联网公司，一般是入门级程序员。工作1到3年后，就成为普通的程序员。工作三五年后，可以算是资深程序员。工作6到10年后，可以成长为技术专家。10年以上，可能成为高级专家或者架构师。</p><h3 id="举例1刚入门的程序员"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例1刚入门的程序员"><span class="icon icon-link"></span></a>举例1：刚入门的程序员</h3><p>小李刚刚大学毕业，进入一个互联网公司。</p><p>领导给他的任务是写一个小模块，其中有一个需求是统计两个日期之间有几个正常工作日（也就是多少是周一到周五）。小李采取的是简单暴力法，就是用一个循环，循环的起始和截至日期就是给定的两个日期。在循环里面，对每一个日期判定一次，确定是工作日还是休息日，然后把工作日累加起来。</p><p>这样的代码显然性能不高，生产环境里面跑起来很快就会出问题。比如，如果两个日期差距很大，这个模块可能就需要很长时间才能处理完。</p><p>如果小李注重代码性能，他完全可以用更高效的方法，比如快速判定给定的两个日期间有多少个星期，然后乘以5，因为每个星期有5个工作日。然后，对头尾的星期进行特殊处理。这样的代码跑起来快多了。我可以想象，小李在优化完代码后，或许会吟诵两句“何当金络脑，快走踏清秋”来形容新代码的性能。</p><h3 id="举例2普通的程序员"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例2普通的程序员"><span class="icon icon-link"></span></a>举例2：普通的程序员</h3><p>小王做程序员2年了，在公司里已经可以独立负责一个模块了。有一天，他需要把一个二维整数数组进行重新赋值，于是，他写出了下面的二重循环：</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage35a93549fc43c8199499d31b2bf5432f23a9.eab0101b.jpg" alt=""/></p><p>如果小王了解计算机内存和缓存的知识以及大小，他或许会写出下面的循环。虽然只有两个字母的差别，性能却提升了很多倍。</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage20d92055088aa3fc67f23d0274435c1e48d9.742700c1.jpg" alt=""/></p><p>原因是什么呢？</p><p>因为计算机通常都会有数量不大的缓存。数组在内存里是连续存放的，所以，如果访问数组元素的时候能够按照顺序来，缓存可以起到极大的加速作用。</p><p>小王一开始的二重循环，恰恰没有有效地使用缓存，反而对数组元素类似随机访问。第二个版本就改正了这个错误，优化了性能。</p><h3 id="举例3资深的程序员"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例3资深的程序员"><span class="icon icon-link"></span></a>举例3：资深的程序员</h3><p>小赵工作4年了，已经算是资深的C加加程序员，负责一个程序的开发和设计。他的一个程序需要使用一个Map的数据结构。他开始使用的是STD库的标准实现：<code>unordered_map</code>。但是他发现，在数据量大的时候，键值的插入操作需要的时间很长。虽然做了各种代码优化，但性能总是不尽人意。</p><p>其实，如果他了解C加加有些库有更高效的Map实现，比如<code>google::dense_hash_map</code>，他或许可以酌情采用，从而大幅度提升性能。</p><p>很多的测试结果显示，<code>google::dense_hash_map</code>的性能可以比<code>std::unordered_map</code>快好几倍。下图（图片来自<a target="_blank" rel="noopener noreferrer" href="https://tessil.github.io/">https://tessil.github.io/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ）正是同一种测试环境下，两种实现的处理时间比较，我们可以清楚地看出性能的差距。</p><p><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimage124e124cbafaf8f452f8399c2c85a1a6534e.deddb86f.png" alt=""/></p><h3 id="举例4技术专家"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例4技术专家"><span class="icon icon-link"></span></a>举例4：技术专家</h3><p>小刘工作8年了，在公司里已经算是不大不小的技术专家了。</p><p>有一天，他看到一份项目计划，其中有一段引起了他的兴趣。这份计划是为了提高服务器的CPU使用效率，提出把应用程序的线程池增大，建议程序线程池的主线程数目应该和服务器的逻辑CPU的数目相等。当然，这里的逻辑CPU，就是我们通常说的虚拟内核数。</p><p>小刘这几年对硬件和操作系统钻研良多，他立刻指出，这样部署不妥，他建议降低主线程池大小到逻辑CPU的一半。技术讨论过程中，小刘给大家仔细讲解了原因，大家最后认可了他的建议，小刘也获得了大家的青睐。</p><p>小刘之所以这样建议，是因为他知道，服务器的逻辑CPU不是物理CPU。在超线程技术（Hyper Threading）的情况下，服务器的吞吐量不是严格按照逻辑CPU的使用率来提升的，因为两个逻辑CPU其实共享很多物理资源。</p><p>比如下面这张图，就表示了在一台有８个逻辑CPU的服务器上，如果部署超过4个线程，得到的性能提升非常有限，甚至可能会带来其他不好的后果。这里具体的提升率和效果，取决于线程和应用程序的特性。（图片来自<a target="_blank" rel="noopener noreferrer" href="http://blog.stuffedcow.net/">http://blog.stuffedcow.net<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）<br/><img src="/blog-architect/static/httpsstatic001geekbangorgresourceimagefd45fd4b4e1797eed83f9967daaf0ea15745.440554b1.png" alt=""/></p><h3 id="举例５高级专家架构师"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#举例５高级专家架构师"><span class="icon icon-link"></span></a>举例５：高级专家（架构师）</h3><p>老周是公司里的架构师和高级专家。他最近对公司的一个重要业务进行了性能优化，用很小的代码改动，就给公司节省了几百万美元的运营成本（这是我身边发生的一个真实案例，除了名字不一样）。</p><p>这个业务的性能瓶颈是CPU。因为业务量大，这个业务部署了1万台以上的服务器，占用了很大一部分数据中心的容量。</p><p>老周仔细研究了业务的逻辑，并且进行了性能测试和分析。他发现代码的执行过程卡在了CPU取指令的速度上：因为内存和缓存的物理特性，CPU花了很大一部分时间在等待指令获取，从而造成了CPU浪费。</p><p>他经过考虑，决定进行<strong>指令级别的提前获取优化</strong>。具体来讲，就是用GCC的<code>__builtin_prefetch</code>指令来预先提取关键指令，从而降低缓存的缺失比例，也就提高了CPU的使用效率。</p><p>下图是GCC关于这个指令的官方文档。</p><p><img src="data:image/png;base64,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" alt=""/></p><p>经过这样的优化，一台服务器可以处理比以前多50%的请求，从而节省了相应比例的服务器和容量。从公司成本角度来看，这一优化节省了3千台以上的服务器，价值几百万美元，老周被CEO开会表扬，也是自然的事情了。</p><p>有趣的是，整个的代码改进只需要几行代码的改动，真真切切是“一字万金”。</p><h2 id="总结"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#总结"><span class="icon icon-link"></span></a>总结</h2><p>重要的事情需要多说几遍：每个IT从业人员，尤其是程序员，都需要关心代码性能。</p><p>如果不了解性能的知识，也许能写出可运行但性能不好的代码。但一个真正对工作、对公司和对自己负责的程序员一定会发现，性能不好的代码无异于耍流氓，不经用还隐患无穷，万万要不得。</p><p>换句话说，对程序员来说，生活不仅是眼前的代码，还有效率和性能的优化。唐代诗人孟郊在考中进士后写了一首《登科后》，其中有两句：“春风得意马蹄疾，一日看尽长安花。”</p><p>我们谁不希望写出来的代码也运行飞快，自己能春风得意呢？！</p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog-architect/性能工程高手课/02.开篇认识代码性能和系统容量效率/01#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>无论你工作几年了，也无论是现在具体做什么工作，你能举出一两个，因为代码性能不好并导致严重后果的例子吗？是什么样的性能问题呢？</p><p>换个角度来说，如果写代码的程序员一开始就考虑到各种性能问题，并且提前在代码里面解决，写出的代码跑得飞快，而且很稳定。这样靠谱的程序员你会不会给他点赞？</p><p>欢迎留言和我分享你的观点，也欢迎你把今天的内容分享给身边的朋友，和他一起讨论。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/性能工程高手课/02.开篇认识代码性能和系统容量效率/01.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/29 14:47:35</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-architect/umi.ded6fefd.js"></script>
  </body>
</html>
